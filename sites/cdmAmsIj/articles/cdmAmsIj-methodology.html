<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AMS-I.J Methodology Walkthrough • cdmAmsIj</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="AMS-I.J Methodology Walkthrough">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cdmAmsIj</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cdmAmsIj-methodology.html">AMS-I.J Methodology Walkthrough</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>AMS-I.J Methodology Walkthrough</h1>
            
      

      <div class="hidden name"><code>cdmAmsIj-methodology.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates how to reproduce the AMS-I.J calculations
using <code>cdmAmsIj</code>. The methodology covers solar water heating
systems that displace fossil or electric water heating. The core steps
include summing useful solar thermal output, applying baseline emission
factors, and accounting for auxiliary energy use.</p>
</div>
<div class="section level2">
<h2 id="applicability-checks">Applicability Checks<a class="anchor" aria-label="anchor" href="#applicability-checks"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">cdmAmsIj</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/check_applicability_swh_capacity.html">check_applicability_swh_capacity</a></span><span class="op">(</span>capacity_mwth <span class="op">=</span> <span class="fl">18</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/check_applicability_solar_resource.html">check_applicability_solar_resource</a></span><span class="op">(</span>annual_irradiation_kwhm2 <span class="op">=</span> <span class="fl">1900</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/check_applicability_backup_fraction.html">check_applicability_backup_fraction</a></span><span class="op">(</span>backup_fraction <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="simulated-dataset">Simulated Dataset<a class="anchor" aria-label="anchor" href="#simulated-dataset"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">example_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_ams_ij_dataset.html">simulate_ams_ij_dataset</a></span><span class="op">(</span>n_sites <span class="op">=</span> <span class="fl">4</span>, n_periods <span class="op">=</span> <span class="fl">6</span>, start_year <span class="op">=</span> <span class="fl">2024</span>, start_month <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span><span class="fu">quiet_kable</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"html"</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: 'xfun::attr()' is deprecated.</span></span>
<span><span class="co">## Use 'xfun::attr2()' instead.</span></span>
<span><span class="co">## See help("Deprecated")</span></span></code></pre>
<table class="table">
<thead><tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:right;">
monitoring_period
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
month
</th>
<th style="text-align:right;">
day
</th>
<th style="text-align:left;">
monitoring_date
</th>
<th style="text-align:left;">
monitoring_label
</th>
<th style="text-align:right;">
useful_heat_mwh
</th>
<th style="text-align:right;">
auxiliary_energy_mwh
</th>
<th style="text-align:right;">
baseline_emission_factor
</th>
<th style="text-align:right;">
auxiliary_emission_factor
</th>
<th style="text-align:right;">
baseline_emissions_tco2e
</th>
<th style="text-align:right;">
project_emissions_tco2e
</th>
<th style="text-align:right;">
emission_reductions_tco2e
</th>
<th style="text-align:right;">
solar_fraction
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2024
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
2024-07-15
</td>
<td style="text-align:left;">
2024-07
</td>
<td style="text-align:right;">
65.349
</td>
<td style="text-align:right;">
7.281
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
14.377
</td>
<td style="text-align:right;">
1.310
</td>
<td style="text-align:right;">
13.066
</td>
<td style="text-align:right;">
0.889
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2024
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
2024-08-19
</td>
<td style="text-align:left;">
2024-08
</td>
<td style="text-align:right;">
36.449
</td>
<td style="text-align:right;">
5.989
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
8.019
</td>
<td style="text-align:right;">
1.078
</td>
<td style="text-align:right;">
6.941
</td>
<td style="text-align:right;">
0.836
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2024
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
2024-09-14
</td>
<td style="text-align:left;">
2024-09
</td>
<td style="text-align:right;">
89.072
</td>
<td style="text-align:right;">
7.925
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
19.596
</td>
<td style="text-align:right;">
1.427
</td>
<td style="text-align:right;">
18.169
</td>
<td style="text-align:right;">
0.911
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2024
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
2024-10-03
</td>
<td style="text-align:left;">
2024-10
</td>
<td style="text-align:right;">
78.536
</td>
<td style="text-align:right;">
13.487
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
17.278
</td>
<td style="text-align:right;">
2.428
</td>
<td style="text-align:right;">
14.850
</td>
<td style="text-align:right;">
0.828
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2024
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
2024-11-10
</td>
<td style="text-align:left;">
2024-11
</td>
<td style="text-align:right;">
58.750
</td>
<td style="text-align:right;">
11.163
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
12.925
</td>
<td style="text-align:right;">
2.009
</td>
<td style="text-align:right;">
10.916
</td>
<td style="text-align:right;">
0.810
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2024
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
2024-12-18
</td>
<td style="text-align:left;">
2024-12
</td>
<td style="text-align:right;">
42.388
</td>
<td style="text-align:right;">
6.011
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
9.325
</td>
<td style="text-align:right;">
1.082
</td>
<td style="text-align:right;">
8.243
</td>
<td style="text-align:right;">
0.858
</td>
</tr>
</tbody>
</table>
<p>The simulation includes monitoring metadata
(<code>monitoring_period</code>, <code>year</code>, <code>month</code>,
<code>day</code>, and <code>monitoring_label</code>) so that
calculations can be aggregated over reporting periods while preserving
site-level identifiers.</p>
</div>
<div class="section level2">
<h2 id="equation-walkthrough">Equation Walkthrough<a class="anchor" aria-label="anchor" href="#equation-walkthrough"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">useful_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_useful_thermal_output.html">calculate_useful_thermal_output</a></span><span class="op">(</span><span class="va">example_data</span>, group_cols <span class="op">=</span> <span class="st">"site_id"</span><span class="op">)</span></span>
<span><span class="va">baseline_emissions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_baseline_emissions.html">calculate_baseline_emissions</a></span><span class="op">(</span></span>
<span>  <span class="va">useful_output</span>,</span>
<span>  baseline_emission_factor <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">baseline_emission_factor</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="va">project_emissions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_project_emissions_auxiliary.html">calculate_project_emissions_auxiliary</a></span><span class="op">(</span></span>
<span>  <span class="va">example_data</span>,</span>
<span>  energy_col <span class="op">=</span> <span class="st">"auxiliary_energy_mwh"</span>,</span>
<span>  emission_factor <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">auxiliary_emission_factor</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  group_cols <span class="op">=</span> <span class="st">"site_id"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">emission_reductions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_emission_reductions.html">calculate_emission_reductions</a></span><span class="op">(</span><span class="va">baseline_emissions</span>, <span class="va">project_emissions</span><span class="op">)</span></span>
<span><span class="fu">quiet_kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emission_reductions</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"html"</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: 'xfun::attr()' is deprecated.</span></span>
<span><span class="co">## Use 'xfun::attr2()' instead.</span></span>
<span><span class="co">## See help("Deprecated")</span></span></code></pre>
<table class="table">
<thead><tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:right;">
useful_thermal_output_mwh
</th>
<th style="text-align:right;">
baseline_emissions_tco2e
</th>
<th style="text-align:right;">
project_emissions_tco2e
</th>
<th style="text-align:right;">
emission_reductions_tco2e
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:right;">
370.543
</td>
<td style="text-align:right;">
81.520
</td>
<td style="text-align:right;">
9.334
</td>
<td style="text-align:right;">
72.185
</td>
</tr>
<tr>
<td style="text-align:left;">
site_2
</td>
<td style="text-align:right;">
328.906
</td>
<td style="text-align:right;">
72.359
</td>
<td style="text-align:right;">
7.758
</td>
<td style="text-align:right;">
64.601
</td>
</tr>
<tr>
<td style="text-align:left;">
site_3
</td>
<td style="text-align:right;">
290.930
</td>
<td style="text-align:right;">
64.005
</td>
<td style="text-align:right;">
9.047
</td>
<td style="text-align:right;">
54.957
</td>
</tr>
<tr>
<td style="text-align:left;">
site_4
</td>
<td style="text-align:right;">
307.547
</td>
<td style="text-align:right;">
67.660
</td>
<td style="text-align:right;">
8.862
</td>
<td style="text-align:right;">
58.798
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="monitoring-period-aggregation">Monitoring Period Aggregation<a class="anchor" aria-label="anchor" href="#monitoring-period-aggregation"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">period_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aggregate_monitoring_periods.html">aggregate_monitoring_periods</a></span><span class="op">(</span></span>
<span>  thermal_data <span class="op">=</span> <span class="va">example_data</span>,</span>
<span>  monitoring_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"monitoring_label"</span><span class="op">)</span>,</span>
<span>  group_cols <span class="op">=</span> <span class="st">"site_id"</span>,</span>
<span>  useful_energy_col <span class="op">=</span> <span class="st">"useful_heat_mwh"</span>,</span>
<span>  auxiliary_energy_col <span class="op">=</span> <span class="st">"auxiliary_energy_mwh"</span>,</span>
<span>  baseline_factor_col <span class="op">=</span> <span class="st">"baseline_emission_factor"</span>,</span>
<span>  auxiliary_factor_col <span class="op">=</span> <span class="st">"auxiliary_emission_factor"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">quiet_kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">period_summary</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"html"</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: 'xfun::attr()' is deprecated.</span></span>
<span><span class="co">## Use 'xfun::attr2()' instead.</span></span>
<span><span class="co">## See help("Deprecated")</span></span></code></pre>
<table class="table">
<thead><tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
monitoring_label
</th>
<th style="text-align:right;">
baseline_emissions_tco2e
</th>
<th style="text-align:right;">
project_emissions_tco2e
</th>
<th style="text-align:right;">
emission_reductions_tco2e
</th>
<th style="text-align:right;">
useful_thermal_output_mwh
</th>
<th style="text-align:right;">
baseline_emission_factor
</th>
<th style="text-align:right;">
auxiliary_emission_factor
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:left;">
2024-07
</td>
<td style="text-align:right;">
14.377
</td>
<td style="text-align:right;">
1.310
</td>
<td style="text-align:right;">
13.066
</td>
<td style="text-align:right;">
65.349
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:left;">
2024-08
</td>
<td style="text-align:right;">
8.019
</td>
<td style="text-align:right;">
1.078
</td>
<td style="text-align:right;">
6.941
</td>
<td style="text-align:right;">
36.449
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:left;">
2024-09
</td>
<td style="text-align:right;">
19.596
</td>
<td style="text-align:right;">
1.427
</td>
<td style="text-align:right;">
18.169
</td>
<td style="text-align:right;">
89.072
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:left;">
2024-10
</td>
<td style="text-align:right;">
17.278
</td>
<td style="text-align:right;">
2.428
</td>
<td style="text-align:right;">
14.850
</td>
<td style="text-align:right;">
78.536
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:left;">
2024-11
</td>
<td style="text-align:right;">
12.925
</td>
<td style="text-align:right;">
2.009
</td>
<td style="text-align:right;">
10.916
</td>
<td style="text-align:right;">
58.750
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
<tr>
<td style="text-align:left;">
site_1
</td>
<td style="text-align:left;">
2024-12
</td>
<td style="text-align:right;">
9.325
</td>
<td style="text-align:right;">
1.082
</td>
<td style="text-align:right;">
8.243
</td>
<td style="text-align:right;">
42.388
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="meta-function">Meta-Function<a class="anchor" aria-label="anchor" href="#meta-function"></a>
</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/estimate_emission_reductions_ams_ij.html">estimate_emission_reductions_ams_ij</a></span><span class="op">(</span></span>
<span>  thermal_data <span class="op">=</span> <span class="va">example_data</span>,</span>
<span>  baseline_emission_factor <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">baseline_emission_factor</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  auxiliary_emission_factor <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">auxiliary_emission_factor</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  group_cols <span class="op">=</span> <span class="st">"site_id"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 5</span></span></span>
<span><span class="co">##   site_id useful_thermal_output_…¹ baseline_emissions_t…² project_emissions_tc…³</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> site_1                      371.                   81.5                   9.33</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> site_2                      329.                   72.4                   7.76</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> site_3                      291.                   64.0                   9.05</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> site_4                      308.                   67.7                   8.86</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ abbreviated names: ¹​useful_thermal_output_mwh, ²​baseline_emissions_tco2e,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ³​project_emissions_tco2e</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: emission_reductions_tco2e &lt;dbl&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="function-reference">Function Reference<a class="anchor" aria-label="anchor" href="#function-reference"></a>
</h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">function_reference</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  Function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"`calculate_useful_thermal_output()`"</span>,</span>
<span>    <span class="st">"`calculate_baseline_emissions()`"</span>,</span>
<span>    <span class="st">"`calculate_project_emissions_auxiliary()`"</span>,</span>
<span>    <span class="st">"`calculate_emission_reductions()`"</span>,</span>
<span>    <span class="st">"`aggregate_monitoring_periods()`"</span>,</span>
<span>    <span class="st">"`estimate_emission_reductions_ams_ij()`"</span>,</span>
<span>    <span class="st">"`simulate_ams_ij_dataset()`"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  Signature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"`calculate_useful_thermal_output(thermal_data, energy_col = \"useful_heat_mwh\", group_cols = NULL)`"</span>,</span>
<span>    <span class="st">"`calculate_baseline_emissions(useful_output, baseline_emission_factor, output_col = \"baseline_emissions_tco2e\")`"</span>,</span>
<span>    <span class="st">"`calculate_project_emissions_auxiliary(auxiliary_data, energy_col = \"auxiliary_energy_mwh\", emission_factor = 0, group_cols = NULL)`"</span>,</span>
<span>    <span class="st">"`calculate_emission_reductions(baseline_emissions, project_emissions, baseline_col = \"baseline_emissions_tco2e\", project_col = \"project_emissions_tco2e\", output_col = \"emission_reductions_tco2e\")`"</span>,</span>
<span>    <span class="st">"`aggregate_monitoring_periods(thermal_data, monitoring_cols = c(\"year\", \"month\"), group_cols = \"site_id\")`"</span>,</span>
<span>    <span class="st">"`estimate_emission_reductions_ams_ij(thermal_data, baseline_emission_factor, auxiliary_emission_factor = 0, group_cols = NULL)`"</span>,</span>
<span>    <span class="st">"`simulate_ams_ij_dataset(n_sites = 10, n_periods = 12, start_year = 2023, start_month = 1, mean_useful_heat_mwh = 360, sd_useful_heat_mwh = 55, baseline_emission_factor = 0.22, auxiliary_emission_factor = 0.18)`"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  Purpose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Summed useful solar thermal output for each group or monitoring period.&lt;br&gt;\\(Q^{useful}_y = \\sum_i Q_{i,y}\\)"</span>,</span>
<span>    <span class="st">"Baseline emissions derived from displaced conventional water heating.&lt;br&gt;\\(BE_y = Q^{useful}_y \\times EF^{BL}\\)"</span>,</span>
<span>    <span class="st">"Project emissions reflecting auxiliary heating energy.&lt;br&gt;\\(PE_y = \\sum_i AUX_{i,y} \\times EF^{aux}_{i,y}\\)"</span>,</span>
<span>    <span class="st">"Emission reductions obtained from the difference between baseline and project emissions.&lt;br&gt;\\(ER_y = BE_y - PE_y\\)"</span>,</span>
<span>    <span class="st">"Monitoring-period aggregation consistent with methodology equations.&lt;br&gt;\\(ER_{p,y} = BE_{p,y} - PE_{p,y}\\)"</span>,</span>
<span>    <span class="st">"Meta-calculation wrapper chaining the equation helpers.&lt;br&gt;\\(ER_y = BE_y - PE_y\\)"</span>,</span>
<span>    <span class="st">"Data generator for examples, testing, and onboarding."</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">quiet_kable</span><span class="op">(</span><span class="va">function_reference</span>, format <span class="op">=</span> <span class="st">"html"</span>, escape <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: 'xfun::attr()' is deprecated.</span></span>
<span><span class="co">## Use 'xfun::attr2()' instead.</span></span>
<span><span class="co">## See help("Deprecated")</span></span></code></pre>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Function
</th>
<th style="text-align:left;">
Signature
</th>
<th style="text-align:left;">
Purpose
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<code><a href="../reference/calculate_useful_thermal_output.html">calculate_useful_thermal_output()</a></code>
</td>
<td style="text-align:left;">
<code>calculate_useful_thermal_output(thermal_data, energy_col = "useful_heat_mwh", group_cols = NULL)</code>
</td>
<td style="text-align:left;">
Summed useful solar thermal output for each group or monitoring
period.<br><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Q</mi><mi>y</mi><mrow><mi>u</mi><mi>s</mi><mi>e</mi><mi>f</mi><mi>u</mi><mi>l</mi></mrow></msubsup><mo>=</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>Q</mi><mrow><mi>i</mi><mo>,</mo><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">Q^{useful}_y = \sum_i Q_{i,y}</annotation></semantics></math>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code><a href="../reference/calculate_baseline_emissions.html">calculate_baseline_emissions()</a></code>
</td>
<td style="text-align:left;">
<code>calculate_baseline_emissions(useful_output, baseline_emission_factor, output_col = "baseline_emissions_tco2e")</code>
</td>
<td style="text-align:left;">
Baseline emissions derived from displaced conventional water
heating.<br><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><msub><mi>E</mi><mi>y</mi></msub><mo>=</mo><msubsup><mi>Q</mi><mi>y</mi><mrow><mi>u</mi><mi>s</mi><mi>e</mi><mi>f</mi><mi>u</mi><mi>l</mi></mrow></msubsup><mo>×</mo><mi>E</mi><msup><mi>F</mi><mrow><mi>B</mi><mi>L</mi></mrow></msup></mrow><annotation encoding="application/x-tex">BE_y = Q^{useful}_y \times EF^{BL}</annotation></semantics></math>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code><a href="../reference/calculate_project_emissions_auxiliary.html">calculate_project_emissions_auxiliary()</a></code>
</td>
<td style="text-align:left;">
<code>calculate_project_emissions_auxiliary(auxiliary_data, energy_col = "auxiliary_energy_mwh", emission_factor = 0, group_cols = NULL)</code>
</td>
<td style="text-align:left;">
Project emissions reflecting auxiliary heating
energy.<br><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>E</mi><mi>y</mi></msub><mo>=</mo><msub><mo>∑</mo><mi>i</mi></msub><mi>A</mi><mi>U</mi><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>y</mi></mrow></msub><mo>×</mo><mi>E</mi><msubsup><mi>F</mi><mrow><mi>i</mi><mo>,</mo><mi>y</mi></mrow><mrow><mi>a</mi><mi>u</mi><mi>x</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">PE_y = \sum_i AUX_{i,y} \times EF^{aux}_{i,y}</annotation></semantics></math>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code><a href="../reference/calculate_emission_reductions.html">calculate_emission_reductions()</a></code>
</td>
<td style="text-align:left;">
<code>calculate_emission_reductions(baseline_emissions, project_emissions, baseline_col = "baseline_emissions_tco2e", project_col = "project_emissions_tco2e", output_col = "emission_reductions_tco2e")</code>
</td>
<td style="text-align:left;">
Emission reductions obtained from the difference between baseline and
project
emissions.<br><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><msub><mi>R</mi><mi>y</mi></msub><mo>=</mo><mi>B</mi><msub><mi>E</mi><mi>y</mi></msub><mo>−</mo><mi>P</mi><msub><mi>E</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">ER_y = BE_y - PE_y</annotation></semantics></math>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code><a href="../reference/aggregate_monitoring_periods.html">aggregate_monitoring_periods()</a></code>
</td>
<td style="text-align:left;">
<code>aggregate_monitoring_periods(thermal_data, monitoring_cols = c("year", "month"), group_cols = "site_id")</code>
</td>
<td style="text-align:left;">
Monitoring-period aggregation consistent with methodology
equations.<br><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><msub><mi>R</mi><mrow><mi>p</mi><mo>,</mo><mi>y</mi></mrow></msub><mo>=</mo><mi>B</mi><msub><mi>E</mi><mrow><mi>p</mi><mo>,</mo><mi>y</mi></mrow></msub><mo>−</mo><mi>P</mi><msub><mi>E</mi><mrow><mi>p</mi><mo>,</mo><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">ER_{p,y} = BE_{p,y} - PE_{p,y}</annotation></semantics></math>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code><a href="../reference/estimate_emission_reductions_ams_ij.html">estimate_emission_reductions_ams_ij()</a></code>
</td>
<td style="text-align:left;">
<code>estimate_emission_reductions_ams_ij(thermal_data, baseline_emission_factor, auxiliary_emission_factor = 0, group_cols = NULL)</code>
</td>
<td style="text-align:left;">
Meta-calculation wrapper chaining the equation
helpers.<br><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><msub><mi>R</mi><mi>y</mi></msub><mo>=</mo><mi>B</mi><msub><mi>E</mi><mi>y</mi></msub><mo>−</mo><mi>P</mi><msub><mi>E</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">ER_y = BE_y - PE_y</annotation></semantics></math>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code><a href="../reference/simulate_ams_ij_dataset.html">simulate_ams_ij_dataset()</a></code>
</td>
<td style="text-align:left;">
<code>simulate_ams_ij_dataset(n_sites = 10, n_periods = 12, start_year = 2023, start_month = 1, mean_useful_heat_mwh = 360, sd_useful_heat_mwh = 55, baseline_emission_factor = 0.22, auxiliary_emission_factor = 0.18)</code>
</td>
<td style="text-align:left;">
Data generator for examples, testing, and onboarding.
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="workflow-overview">Workflow Overview<a class="anchor" aria-label="anchor" href="#workflow-overview"></a>
</h2>
<pre><code><span><span class="co">## Warning: 'xfun::attr()' is deprecated.</span></span>
<span><span class="co">## Use 'xfun::attr2()' instead.</span></span>
<span><span class="co">## See help("Deprecated")</span></span></code></pre>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Step
</th>
<th style="text-align:left;">
Purpose
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Input solar thermal monitoring data
</td>
<td style="text-align:left;">
Collect monitoring period, useful heat, auxiliary energy, and emission
factor metrics.
</td>
</tr>
<tr>
<td style="text-align:left;">
calculate_useful_thermal_output
</td>
<td style="text-align:left;">
Summarise useful solar thermal output for each site or reporting period.
</td>
</tr>
<tr>
<td style="text-align:left;">
calculate_baseline_emissions
</td>
<td style="text-align:left;">
Apply baseline emission factors to displaced conventional energy use.
</td>
</tr>
<tr>
<td style="text-align:left;">
calculate_project_emissions_auxiliary
</td>
<td style="text-align:left;">
Convert auxiliary energy consumption into project emissions.
</td>
</tr>
<tr>
<td style="text-align:left;">
calculate_emission_reductions
</td>
<td style="text-align:left;">
Compare baseline and project totals to obtain emission reductions.
</td>
</tr>
<tr>
<td style="text-align:left;">
estimate_emission_reductions_ams_ij
</td>
<td style="text-align:left;">
Return a tidy tibble with reductions and supporting diagnostics.
</td>
</tr>
</tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Christiaan Pauw.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
